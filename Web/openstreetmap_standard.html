<!DOCTYPE html>
<html lang="de">
   <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<title>Position-Shower</title>
	<!-- leaflet.css und leaflet.js von externer Quelle einbinden -->
	
	<link rel="stylesheet" href="/Web/leaflet/leaflet.css" />
	<script src="/Web/leaflet/leaflet.js"></script>

   </head>
   <body>
	   	<header>
			<p>Nur tracker funktion mit leaflet</p>
		</header>
		<div id='meineKarte' style='height: 670px; width: 90%;'></div>
		<!-- OSM-Basiskarte einfügen und zentrieren -->
		<script type='text/javascript'>
			var lon = 43.5320369;
			var lat = 15.9813014;

			var Karte = L.map('meineKarte').setView([lon, lat], 16);
			L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			'attribution':  'Kartendaten &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> Mitwirkende',
			'useCache': true
			}).addTo(Karte);
		</script>

		<!-- Marker einfügen -->
		<script>
			var marker;

			this.Karte.locate({
			setView: true,
			maxZoom: 13,
			watch: true,
			enableHighAccuracy: true
			}).on("locationfound", e => {
				if (!marker) {
					marker = new L.marker(e.latlng).addTo(this.Karte);
				} else {
					marker.setLatLng(e.latlng);
					console.log(e.latlng);
				}
			}).on("locationerror", error => {
				if (marker) {
					Karte.removeLayer(marker);
					marker = undefined;
				}
			});
		</script>
		
	  </body>
	  <!--
		  Die Fluglinie zwischen akt. Position und ziel ausrechnen -> wenn Fl < (festgelegter radius des Ziels in dem man sich befinden muss) -> Ziel erreicht
	  -->
</html>
